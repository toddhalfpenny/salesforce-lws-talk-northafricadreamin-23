<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Synchronising Component Data and MOAR. Let's dive into Lightning Web Security - North Africa Dreamin '23</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/northafricadreamin23.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div id="slides" class="slides">
				<!-- 
					===========================================================
					HEADER
				-->
				<header id='header' class="hidden">
					<img src="assets/imgs/sponsor/cap.png" />
					<img src="assets/imgs/sponsor/dandb.png"/>
					<img src="assets/imgs/sponsor/deloitte.png"/>
					<img src="assets/imgs/sponsor/hexagone.png"/>
					<img src="assets/imgs/sponsor/nbs.png">
				</header>
	


				<!-- 
					===========================================================
					TITLE
				-->
				<section id="title" class="title-slide" data-transition="fade-in fade-out">
				<img class="title-logo" src="assets/imgs/logo_NADREAMIN.png">
				<h1>Synchronising Component Data and MOAR</h1>
				<h2>Let's dive into Lightning Web Security</h2>
				<div id="sponsors">
					<h3>SPONSORED BY:</h3>
					<div id='intro-sponsors1'>
						<img src="assets/imgs/sponsor/cap.png" />
						<img src="assets/imgs/sponsor/dandb.png"/>
						<img src="assets/imgs/sponsor/deloitte.png"/>
					</div>
					<div id='intro-sponsors2'>
						<img src="assets/imgs/sponsor/hexagone.png"/>
						<img src="assets/imgs/sponsor/nbs.png">
					</div>
					<div id='intro-sponsors3'>
						<img src="assets/imgs/sponsor/gear9.png" />
						<img src="assets/imgs/sponsor/gridmate.png"/>
						<img src="assets/imgs/sponsor/intelica.png"/>
						<img src="assets/imgs/sponsor/leyton.png"/>
						<img src="assets/imgs/sponsor/oreivation.png">
						<img src="assets/imgs/sponsor/vanighns.png"/>
						<img src="assets/imgs/sponsor/viseo.png">
					</div>
				</div>
				<aside class="notes">
					<ul>
						<li>Thank sponsors and organisers</li>
						<li>Houssam and Abdelhakim</li>
					</ul>
				</aside>	
				</section>


				<!-- 
					===========================================================
					ME
				-->
				<section id="me" class="has-header">
					<div class="slide-title">
						<h1>Me</h1>
					</div>
					<ul>
						<li>Todd halfpenny <a href="https://toddhalfpenny.com">@toddhalfpenny</a></li>
						<li>Mobile Technical Architect @ <a href="https://caddify.com/">Caddify</a></li>
						<li>London Dev Group organiser</li>
						<li><a href="https://londonscalling.net">London's Calling</a> organiser</li>
						<li>Salesforce MVP</li>
						<li>Golden Hoodie Recipient</li>
						<li>Founder of <a href="https://shirtforce.org">Shirtforce</a></li>
					</ul>
					<img class="r-stretch"  data-src="assets/imgs/todd.jpeg">
					<p>&nbsp;</p>
				</section>


				<!-- 
					===========================================================
					TOPIC INTRO
				 -->
				 <section id="topic-intro" class="has-header">
					<div class="slide-title">
						<h1>Lightning Web Security</h1>
						<h2>Synchronising Component Data and MOAR</h2>
					</div>
					<ul>
						<li class="fade-in-then-semi-out fragment">What, Why, and When</li>
						<li class="fade-in-then-semi-out fragment">Tooling</li>
						<li class="fade-in-then-semi-out fragment">Examples</li>
						<li class="fade-in-then-semi-out fragment">Benefits &amp; Limitations</li>
					</ul>
					<aside class="notes">
						<ul>
							<li></li>
							<li></li>
						</ul>
					</aside>	
				</section>


				<!-- 
					===========================================================
					WHY DO WE NEED THIS
				-->
				<section id="locker-background" class="has-header">
					<div class="slide-title">
						<h1>We already have Locker Service</h1>
						<h2>Do we need something new?</h2>
					</div>
					<ul>
						<li class="fade-in-then-semi-out fragment">A brief history</li>
						<li class="fade-in-then-semi-out fragment">The down-sides</li>
						<li class="fade-in-then-semi-out fragment">The future</li>
					</ul>
					<aside class="notes">
						<ul>
							<li>LS Built by SF to fulfill a need</li>
							<li>non-standard</li>
							<li>Huge distortions - e.g. window global objects</li>
							<li>Performance hit</li>
							<li>LS is being maintained, not enhanced</li>
						</ul>
					</aside>
				</section>


				<!-- 
					===========================================================
					WHAT IS LWS
				-->
				<section id="why-lightning-web-security" class="has-header">
					<div class="slide-title">
						<h1>And Lightning Web Security is Better?</h1>
					</div>
					<div class="cols-2">
					<ul>
						<li class="fade-in-then-semi-out fragment">Just as secure</li>
						<li class="fade-in-then-semi-out fragment">Standards based</li>
						<li class="fade-in-then-semi-out fragment">Better performance</li>
						<li class="fade-in-then-semi-out fragment">Other benefits... we will get to them</li>
						<li class="fade-in-then-semi-out fragment">Also things to consider... we will get to them too</li>
						<li class="fade-in-then-semi-out fragment">Available now</li>
					</ul>
						<div>
						<img class="width80" src="assets/imgs/js-sandboxing.png"/>

						<p class="attribution">Image: Salesforce</p>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>Standards based</li>
							<li>"We expect to resume automatic enablement beginning with Winter24"</li>
						</ul>
					</aside>
				</section>



				<!-- 
					===========================================================
					TOOLING
				-->
				<section id="tooling" class="has-header">
					<div class="slide-title">
						<h1>There are some tools to help you</h1>
					</div>
					<ul>
						<li>LWS Console</li>
						<li>LWS Distortion Viewer</li>
						<li>LWS ESLint Plugin</li>
					</ul>
					<aside class="notes">
						<ul>
							<li></li>
						</ul>
					</aside>
				</section>
				<!-- 
					===========================================================
					TOOLING - LWS CONSOLE
				-->
				<section id="tooling-console" class="has-header">
					<div class="slide-title">
						<h2>LWS Console</h2>
					</div>
					<div>
						<img class="screenshot center" src="assets/imgs/lws-console3.png" />
					</div>
					<aside class="notes">
						<ul>
							<li>I don't think this is quite right</li>
							<li>Editor is also clunky</li>
							<li>Does not run imports etc</li>
						</ul>
					</aside>
				</section>		
				<!-- 
					===========================================================
					TOOLING - LWS DISTORTION VIEWER
				-->
				<section id="tooling-distortion-viewer" class="has-header">
					<div class="slide-title">
						<h2>LWS Distortion Viewer</h2>
					</div>
					<div>
						<img class="screenshot center" src="assets/imgs/lws-distortion-viewer-02.png" />
					</div>
					<aside class="notes">
						<ul>
							<li>A search would be good</li>
							<li></li>
						</ul>
					</aside>
				</section>		
				<!-- 
					===========================================================
					TOOLING - LWS DISTORTION VIEWER
				-->
				<section id="tooling-eslint" class="has-header">
					<div class="slide-title">
						<h2>LWS ESLint Plugin</h2>
					</div>
					<div>
						<img class="screenshot center" src="assets/imgs/lws-eslint-02.png" />
						<p class="attribution">Image: Salesforce</p>
					</div>
					<aside class="notes">
						<ul>
							<li>A search would be good</li>
							<li></li>
						</ul>
					</aside>
				</section>			
				
				
				
				<!-- 
					===========================================================
					DEMO 1 - Global Objects
				-->
				<section id="global-objects" class="has-header">
					<div class="slide-title">
						<h1>Show me the good stuff</h1>
					</div>
					<ol>
						<li class="fade-in-then-semi-out fragment">Access to global objects</l1>
					</ol>
					<ul>
					</ul>
					<aside class="notes">
						<ul>
							<li>9 MINS?</li>
							<li>Remeber we mentioned LS has a pretent window</li>
							<li>indexedDB</li>
						</ul>
					</aside>
				</section>
				<!-- 
					===========================================================
					DEMO VIDEO 1a - Global Objects DESKTOP
				 -->
				 <section id="global-objects-demo" class="fullvideo" data-background-video ="assets/vids/lws-talk-01.mp4" 
				 data-background-size="contain">
					 <aside class="notes">
						 <ul>
						 </ul>
					 </aside>
				 </section>
				<!-- 
					===========================================================
					DEMO 1 - Global Objects - MOBILE
				-->
				<section id="global-objects-recap" class="has-header">
					<div class="slide-title">
						<h2>Global Objects - Summary</h2>
					</div>
					<ul>
						<li class="fade-in-then-semi-out fragment">Lots more access</li>
						<li class="fade-in-then-semi-out fragment">Not complete parity on mobile
							<ul>
								<li>Limited navigator</li>
								<li>Clipboard exposed, but no permissions</li>
								<li>No WebShare</li>
								<li>No bluetooth</li>
								<li>We do have lightning/mobileCapabilities</li>
							</ul>
						</li>
					</ul>
					<aside class="notes">
						<ul>
							<li>Also IndexedDB</li>
							<li>Have asked about increasing the scope</li>
							<li>And we have lightning/mobileCapabilities</li>
						</ul>
					</aside>
				</section>



				<!-- 
					===========================================================
					DEMO 2 - X-NAMESPACE
				-->
				<section id="x-namespace" class="has-header">
					<div class="slide-title">
						<h1>Show me the good stuff</h1>
					</div>
					<ol>
						<li class="seen">Access to global objects</l1>
						<li class="">X-Namespace component use</l1>
					</ol>
					<ul>
					</ul>
					<aside class="notes">
						<ul>
							<li>Import components / moudles x-namepsace</li>
							<li>Components are isolated in their own namespace JavaScript sandbox</li><li>
							<li>but transparent because LWS performs virtual comms BTS</li>
							<li></li>
						</ul>
					</aside>
				</section>
				<!-- 
					===========================================================
					DEMO VIDEO 2a - X-NAMESPACE
				 -->
				 <section id="x-namespace-demo" class="fullvideo" data-background-video ="assets/vids/lws-talk-raw-02.mp4" 
				 data-background-size="contain">
					 <aside class="notes">
						 <ul>
							 <li>Build on our previous demo</li>
							 <li>Stephan Chandler-Garcia OSS Lightning Message Utility</li>
							 <li>More components on AppX</li>
						 </ul>
					 </aside>
				 </section>
				 <!-- 
					===========================================================
					DEMO VIDEO 2a - X-NAMESPACE
				 -->
				 <section id="x-namespace-code" class="has-header">
					<div class="slide-title">
						<h2>X-Namespace Component</h2>
					</div>
					<p class="filename">globalObjectTwo.html</p>
					<pre><code class="language-html" data-trim data-line-numbers="0|1|2-9|0">
						<template lwc:if={error}>
							&#60ltngmu-lwc-messaging-utility
								message-type="alert"
								show-message="true"
								message-body="Unable to paste ..."
								message-variant="warning"
								...
								>
							&#60/ltngmu-lwc-messaging-utility>
						</template>
					</code></pre>
					<img id="x-namepace" class="screenshot" src="assets/imgs/x-namespace-screenshot.png"/>
					 <aside class="notes">
						 <ul>
							 <li>Build on our previous demo</li>
							 <li>Stephan Chandler-Garcia OSS Lightning Message Utility</li>
							 <li>More components on AppX</li>
						 </ul>
					 </aside>
				 </section>


				 
				
				<!-- 
					===========================================================
					DEMO 3 - REFRESHVIEW
				-->
				<section id="refreshview" class="has-header">
					<div class="slide-title">
						<h1>Show me the good stuff</h1>
					</div>
					<ol>
						<li class="seen">Access to global objects</l1>
						<li class="seen">X-Namespace component use</l1>
						<li class="">RefreshView API</l1>
					</ol>
					<ul>
					</ul>
					<aside class="notes">
						<ul>
							<li>Refresh components without needing to refresh the page</li>
							<li>Well Winter 24 scuppered my talk ;-)</li>
							<li>Let’s see it anyway - 2 talks in one</li>
							<li>Mohith: “the team got so much feedback that it takes sometime to move to LWS for enterprise customers, they made it working without LWS”</li>
						</ul>
					</aside>
				</section>
				<!-- 
					===========================================================
					DEMO VIDEO 3a - REFRESHVIEW WIHOUT LWS
				 -->
				 <section id="refreshview-demo-1" class="fullvideo" data-background-video ="assets/vids/lws-talk-raw-03.mp4" 
				 data-background-size="contain">
					 <aside class="notes">
						 <ul>
							 <li></li>
						 </ul>
					 </aside>
				 </section>
				 <!-- 
					===========================================================
					DEMO 3b - REFRESHVIEW SHOW LWS CODE
				-->
				<section id="refreshview-lws1" class="has-header">
					<div class="slide-title">
						<h2>RefreshView API (LWS)</h2>
					</div>					
					<p class="filename">newContact.js</p>
					<pre class="center"><code class="language-javascript" data-trim data-line-numbers="0|1|4-6|0">
						import { RefreshEvent } from "lightning/refresh";
						...
						...
						handleSave(){ 
							this.dispatchEvent(new RefreshEvent());
						}
					</code></pre>
					<ul>
					</ul>
					<aside class="notes">
						<ul>
							<li>Standard components already appear to be handling updates</li>
							<li></li>
						</ul>
					</aside>
				</section>
				<!-- 
				   ===========================================================
				   DEMO 3c - REFRESHVIEW SHOW LWS CODE
			   -->
			   <section id="refreshview-lws2" class="has-header">
				   <div class="slide-title">
					   <h2>RefreshView API (LWS)</h2>
				   </div>					
				   <p class="filename">primaryContact.js</p>
				   <pre class="center"><code class="language-javascript" data-trim data-line-numbers="1|4-7|9-14">
import { registerRefreshHandler, ... } from "lightning/refresh";
import { refreshApex } from "@salesforce/apex";
...
connectedCallback(){ 
	this.refreshID = registerRefreshHandler(
		this, this.refreshHandler);
}
...
refreshHandler() {
	return new Promise(async (resolve, reject) => {
		refreshApex(this.wiredContactsResult)
		.then(() => resolve(true));
	});
}
				   </code></pre>
				   <aside class="notes">
					   <ul>
						   <li>Standard components already appear to be handling updates</li>
						   <li></li>
					   </ul>
				   </aside>
			   </section>
				<!-- 
					===========================================================
					DEMO VIDEO 3d - REFRESHVIEW VID WITH LWS
				 -->
				 <section id="refreshview-demo-2" class="fullvideo" data-background-video ="assets/vids/lws-talk-raw-04.mp4" 
				 data-background-size="contain">
					 <aside class="notes">
						 <ul>
							 <li></li>
						 </ul>
					 </aside>
				 </section>
				 <!-- 
					===========================================================
					DEMO 3e - REFRESHVIEW
				-->
				<section id="refreshview-locker" class="has-header">
					<div class="slide-title">
						<h2>RefreshView API - Locker comparisson</h2>
					</div>					
					<p class="filename">Registering a handler</p>
					<pre class="center"><code class="language-javascript" data-trim data-line-numbers="0 |2-5 | 8-11">
// LWS
this.rHandlerID = registerRefreshHandler(
	this,
	this.refreshHandler
);

// Locker Service
this.rHandlerID = registerRefreshHandler(
	this.template.host,
	this.refreshHandler.bind(this)
);
					</code></pre>
					<aside class="notes">
						<ul>
							<li>Dispating a refresh works in the same way</li>
						</ul>
					</aside>
				</section>
				<!-- 
				   ===========================================================
				   DEMO 3f - REFRESHVIEW
			   -->
			   <section id="refreshview-locker-check" class="has-header">
				   <div class="slide-title">
					   <h2>Checking for LWS</h2>
				   </div>					
				   <pre><code class="language-javascript" data-trim data-line-numbers="">
function hasLightningWebSecurityEnabled() {
	try {
		new Worker();
	} catch ({ message }) {
		if (message.includes('Lightning Web Security: Cannot create Worker')) {
		return true;
		}
	}
	return false;
}
				   </code></pre>
				   <aside class="notes">
					   <ul>
						   <li>Create a logical branch</li>
						   <li>NOT work if uses static cross-namespace references</li>
						   <li>would attempt to run or render on instantiation and cannot be gated by an if-statement</li>
						   <li>"We are considering creating an officially supported way to check"</li>
					   </ul>
				   </aside>
			   </section>



				<!-- 
					===========================================================
					BENEFITS + LIMITATIONS
				-->
				<section id="benefits-limitations" class="has-header">
					<div class="slide-title">
						<h1>LWS - Benefits &amp; Limitations</h1>
					</div>				
					<div class="cols-2">
						<div class="col fragment">
							<h2>Limitations</h2>
							<ul>
								<li class="">Aura support</li>
								<li class="">Distortions</li>
								<li class="">Mobile parity</li>
								<li>ISV implications</li>
							</ul>
						</div>
						<div class="col fragment">
							<h2>But... the Benefits</h2>
							<ul>
								<li class="">Global object access</li>
								<li class="">3rd party lib support</li>
								<li class="">X-Namespace</li>
								<li class="">RefreshView API</li>
							</ul>
						</div>
					</div>
					<aside class="notes">
						<ul>
							<li>TODO check on distortion terminolgy</li>
							<li>Differing mobile support</li>
							<li>MORE could be exposed to mobile</li>
						</ul>
					</aside>
				</section>
				
				
				
				<!-- 
					===========================================================
					SUMARRY
				-->
				<section id="summary" class="has-header">
					<div class="slide-title">
						<h1>So in summary</h1>
					</div>
					<ul>
						<li>What, Why, and When</li>
						<li>Tooling</li>
						<li>Examples</li>
						<li>Benefits &amp; Limitations</li>
					</ul>
					<aside class="notes">
						<ul>
							<li></li>
							<li></li>
						</ul>
					</aside>
				</section>
				
				
				
				<!-- 
					===========================================================
					RESOURCES
				-->
				<section id="resources" class="has-header">
					<div class="slide-title">
						<h1>Resources</h1>
					</div>
					<ul>
						<li>LWS FAQ<br/><a target="_blank" href="https://sforce.co/3RYInSO">sforce.co/3RYInSO</a><img class="qrcode" src="assets/imgs/sforce.co_3RYInSO.png"/></li>
						<li>CodeLive - RefreshView API<br/><a target="_blank" href="https://bit.ly/3RWE7DA">bit.ly/3RWE7DA</a><img class="qrcode" src="assets/imgs/bit.ly_3RWE7DA.png"/></li>
						<li>Lightning Message Utility Component<br/><a target="_blank" href="https://sforce.co/46E6CtS">sforce.co/46E6CtS</a><img class="qrcode" src="assets/imgs/sforce.co_46E6CtS.png"/></li>
						<li>These slides<br/><a target="_blank" href="https://bit.ly/3QhVjSC">bit.ly/3QhVjSC</a><img class="qrcode" src="assets/imgs/bit.ly_3QhVjSC.png"/></li>
					</ul>
					<aside class="notes">
						<ul>
							<li></li>
						</ul>
					</aside>
				</section>
				
				
				
				<!-- 
					===========================================================
					Q&A
				-->
				<section id="qAndA" class="title-slide" data-transition="fade-in fade-out">
					<img class="title-logo" src="assets/imgs/logo_NADREAMIN.png">
					<h1>Q&A</h1>
					<div id="sponsors">
						<h3>SPONSORED BY:</h3>
						<div id='intro-sponsors1'>
							<img src="assets/imgs/sponsor/cap.png" />
							<img src="assets/imgs/sponsor/dandb.png"/>
							<img src="assets/imgs/sponsor/deloitte.png"/>
						</div>
						<div id='intro-sponsors2'>
							<img src="assets/imgs/sponsor/hexagone.png"/>
							<img src="assets/imgs/sponsor/nbs.png">
						</div>
						<div id='intro-sponsors3'>
							<img src="assets/imgs/sponsor/gear9.png" />
							<img src="assets/imgs/sponsor/gridmate.png"/>
							<img src="assets/imgs/sponsor/intelica.png"/>
							<img src="assets/imgs/sponsor/leyton.png"/>
							<img src="assets/imgs/sponsor/oreivation.png">
							<img src="assets/imgs/sponsor/vanighns.png"/>
							<img src="assets/imgs/sponsor/viseo.png">
						</div>
					</div>
				</section>


				<!-- 
					===========================================================
					THANK YOU
				-->
				<section id="thankyou" class="title-slide" data-transition="fade-in fade-out">
					<img class="title-logo" src="assets/imgs/logo_NADREAMIN.png">
					<h1>THANK YOU</h1>
					<div id="sponsors">
						<h3>SPONSORED BY:</h3>
						<div id='intro-sponsors1'>
							<img src="assets/imgs/sponsor/cap.png" />
							<img src="assets/imgs/sponsor/dandb.png"/>
							<img src="assets/imgs/sponsor/deloitte.png"/>
						</div>
						<div id='intro-sponsors2'>
							<img src="assets/imgs/sponsor/hexagone.png"/>
							<img src="assets/imgs/sponsor/nbs.png">
						</div>
						<div id='intro-sponsors3'>
							<img src="assets/imgs/sponsor/gear9.png" />
							<img src="assets/imgs/sponsor/gridmate.png"/>
							<img src="assets/imgs/sponsor/intelica.png"/>
							<img src="assets/imgs/sponsor/leyton.png"/>
							<img src="assets/imgs/sponsor/oreivation.png">
							<img src="assets/imgs/sponsor/vanighns.png"/>
							<img src="assets/imgs/sponsor/viseo.png">
						</div>
					</div>
				</section>


				<!-- 
					===========================================================
					FOOTER
				-->
				<footer id='footer' class="hidden">
					<!-- <p class="author"><a href="https://twitter.com/toddhalfpenny">@toddhalfpenny</a></p> -->					
					<img src="assets/imgs/logo_NADREAMIN.png">
					<p><a href="https://twitter.com/nafricadreamin">CASABLANCA</a></p>
					<p><a href="https://twitter.com/nafricadreamin">#NAD2023</a></p>
				</footer>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		<script>
			// COMMENTED OUT STUFF FROM C'DREAMIN 22 TALK
			Reveal.initialize({
				controls: false,
				hash: true,
				center: false,
				maxScale: 1.8,
				//margin: 0.18, // Reduced this for NAD as they have a slide background
				margin: 0.05,
				progress: false,
				width: 1500,
				height: 900,

				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
			});
			Reveal.on( 'slidechanged', event => {
				console.log('slidechanged', event.currentSlide);
				if (event.currentSlide.className.includes('has-header')) {
					showFooter();
					showHeader();
				} else {
					hideFooter();
					hideHeader();
				}
				if (event.currentSlide.className.includes('fullvideo')) {
					hideBackground();
				} else {
					showBackground();
				}
			} );

			function hideFooter() {
				console.log('hideFooter');
				let el = document.getElementById('footer');
				console.log('footer', el);
				if (el.className !== 'hidden'){ el.className = 'hidden' };
			}

			function showFooter() {
				console.log('showFooter');
				let el = document.getElementById('footer');
				console.log('footer', el);
				if (el.className && el.className === 'hidden'){ el.className = ''};
			}

			function hideHeader() {
				console.log('hideHeader');
				let el = document.getElementById('header');
				console.log('header', el);
				if (el.className !== 'hidden'){ el.className = 'hidden' };
			}

			function showHeader() {
				console.log('showHeader');
				let el = document.getElementById('header');
				console.log('header', el);
				if (el.className && el.className === 'hidden'){ el.className = ''};
			}

			function showBackground() {
				console.log('showBackground');
				let el = document.getElementById('slides');
				el.classList.remove("hide-background");
			}

			function hideBackground() {
				console.log('hideBackground');
				let el = document.getElementById('slides');
				el.classList.add("hide-background");
			}
		</script>
	</body>
</html>
